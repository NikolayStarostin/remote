![picture](git.png)

# Работа с Git

> ## 1. Проверка наличия установленного Git

В терминале выполнить команду `git version`

* Подсветка синтаксиса - обрамление 
```C#
Таким образом можно  вписывать чёрный фон.
При этом в начале можно указать название языка (пример C#).
```
Если Git установлен, то появится сообщение с информацией о версии программы. Иначе будет сообщение об ошибке.

## 2. Установка Git

Загружаем последнюю версию Git с официального [сайта](https://git-scm.com/downloads)

Устанавливаем с настройками по умолчанию.

## 3. Настройка Git

При первом использовании Git необходимо предсавиться
```Git
git config --global user.email "You email"
git config --global user.name "You name"
```
Для получения справки по основным командам Git следует воспользоваться командой
```
git help
```
##### *Подробная информация изложена в [книге](https://git-scm.com/book/ru/v2) на официальном сайте*

## 4. Инициализация репозитория

Для создания версии существующего проекта с использованием нового репозитория Git используется следующая команда
```
git init
```
Команда `git init` создаёт в текущем каталоге новый подкаталог с именем .git, содержащий основу Git-репозитория.

Для клонирования существующего репозитория используется команда
```
git clone
```
Команда `git clone` используется, например, для контроля версий, когда осуществляется доработка текущего проекта и необходимо внедрить новые компоненты.

##### *При этом следует помнить, что сама по себе команда git diff не показывает все изменения, сделанные с последнего коммита, а только те, что ещё не проиндексированы.*

## 5. Запись изменений в репозиторий

Для отслеживания изменений в репозитории используется команда
```
git add "имя отслеживаемого файла"
```
Команда `git add` добавляет файл в отслеживаемые для последующего коммита.

Для сохранения изменений в файле используется команда
```
git commit -m "описание осуществлённых изменений"
```
Команда `git commit` сохраняет изменения в файле, переносит их в соответствующий репозиторий и создаёт ссылки на эти данные.

Для удобства команды `git add` и `git commit` можно совместить путём написания одной команды
```
git commit -am "описание осуществлённых изменений"
```
Для редактирования комментариев, изменения последнего сообщения фиксации или добавления изменений  к последней фиксации следует использовать следующую команду
```
git commit --amend - am "название комментария"
```
Команда `git commit --amend` позволяет объединить проиндексированные изменения с предыдущим коммитом без создания нового коммита.

Для просмотра состояния репозитория используется команда
```
git status
```
Команда `git status` отображает состояние рабочего каталога и раздела проиндексированных файлов. С ее помощью можно проверить индексацию изменений и увидеть файлы, которые не отслеживаются Git
Команда `git status` выводит значительный объем информации, который не всегда может быть необходим. Для вывода вывода сокращенного статуса, чтобы  увидеть изменения в более компактном виде используется команда
```
git status -s или git status --short
```

## 6. Просмотр истории коммитов

Для просмотра истории коммитов, что было сделано в репозитории, используется команда

```
git log
```
Команда `git log` выводит существующую историю коммитов в рьпаиерм к хронологическому порядке, то есть когда последние коммиты находятся вверху.
Команда `git log` имеет большое количество параметров для поиска коммитов по разным критериям. Например
```
git log --oneline выводит каждый коммит в одну строку
git log --stat выводит статистику измененных файлов для каждого коммита
git log --name-only выводит список измененных файлов после информации о коммите
git log --name-status выводит список файлов, которые добавлены/изменены/удалены
```
На ряду с командой `git log` для анализа текущего состояния репозитория и просмотра внесённых изменений часто используется команда
```
git diff
```
Команда `git diff` показывает какие непосредственно строки были добавленны и удалённы.

Кроме того, команда `git diff` производит сравнение источников данных Git - коммитов, веток и файлов.

Команда `git diff` также имеет специальный режим, в котором изменения выделяются различными цветами
```
git diff --color
```
$\color {green} {зеленый} $ или знак "$\color {green} {+} $" - добавлено

$\color {red} {красный} $ или знак "$\color {red} {-} $" - удалено

## 7. Перемещение между сохранениями

Для переключения между сохранениями или ветками используется команда
```
git checkout
```
Команда `git checkout` используется для просмотра и внесения изменений в различные ветви репозитория.
С помощью команды `git checkout` можно также отменить изменения файла и возвратить его в первичное состояние.
Для возврата необходимо знать либо найти идентификатор редакции (коммита), в которую необходимо вернуться. Для этого использется команда:
```
git log
```
После того выбран необходимый коммит в истории, то для перехода к нему используется команда:
```
git checkout "уникальный идентифицирующий хеш коммита"
```
Для возврата в актуальное состояние после внесения необходимых изменений используется команда:
```
git checkout "название ветки"
```
В дальнейшем сравнение внесенных изменений в файлах относительно последнего коммита осуществляется с помощью команды `git diff`.


## 8. Игнорирование файлов

Для того, чтобы исключить из отслеживания в репозитории определённые файлы или папки необходимо создать там файл ***.gitignore*** и записать в него названия или шаблоны файлов, соответствующие таким файлам или папкам.

## 9. Создание веток в Git
Ветка в Git - это простой перемещаемый указатель на один из коммитов, обычно последний в цепочке коммитов.
По умолчанию имя основной ветки в Git - master.
Создать ветку можно командой:
```
git branch "Имя ветки"
```
В результате создается новый указатель на текущий коммит.

git branch -b "имя ветки" создание

git branch -m "имя ветки" переименование

git branch -d "имя ветки" удаление

## 10. Слияние в Git

Слияние веток – это перенос изменений из одной ветки в другую.
Основновной веткой, в которой ведётся работа является ветка **master**.
Для проработки отдельных элементов проекта создаются дополнительные ветки, которые в дальнейшем могут быть присоединены к проекту путем объединения с веткой **master**.
Данная процедура объединения веток называется слиянием - **merge**.

Для слияния одной или нескольких веток в текущую используется команда
```
git merge
```
Слияние происходит путем переноса внесенных изменений в дополнительной ветке в основную ветку.
Для этого необходимо зафиксировать изменения в дополнительной ветке, а после переключиться на основную ветку и использовать команду `git merge`

### 10.1. Конфликты при слиянии

В случае, когда в разных ветках по-разному изменена одна и таже часть файла при слиянии происходит конфликт.
Git не сможет автоматически объединить ветки, и, следовательно, Git не создаст коммит слияния автоматически, в результате чего будет выведено сообщение о конфликте слияния.
Процесс слияния веток будет остановлен до тех пор, пока не будет разрешен конфликт.
При возникновении конфликта мы должны в ручном режиме его устранить.

### 10.2. Варианты конфликтов

При возникновении конфликта слияния версий будет предложено несколько вариантов разрешения конфликта на выбор:
* принять вариант из основной ветки
* принять вариант из сливаемой ветки
* принять оба варианта

>! Какой из вариантов разрешения конфликтов принимать - выбирает именно пользователь.

$\color {red} {важно}$ после разрешения конфликта необходимость сделать коммит слияния.

### 10.3. Схема конфликтов

<details>

master   | added branch | decision
-------- |:------------:|:------:
оставить | отменить     | выбор первого варианта
отменить | оставить     | выбор второго варианта
оставить | оставить     | принять оба варианта
</details>

## 11. Удаление веток

В ходе работы с Git в репозитории может накапливаться много ненужных или пустых веток, которые возникает необходимость удалить.

$\color {red} {важно}$ перед удалением следует проверить, какие ветки есть в проекте.
Для того чтобы посмотреть ветки используеся команда:
```
git branch
```
`git branch` выведет список всех веток, а текущая ветка будет выделена зеленым цветом и звездочкой.

Для удаления ветки исползуется комманда:
```
git branch -d "название ветки"
```
В случае, если в ветке есть не зафиксированные изменения или коммиты, то Git откажется её удалять.
В таком случае для удаления такой ветки используется комманда:
```
git branch -D "название ветки"
```

`-D` является сокращение `--delete --force`, что позволяет удалить ветку независимо от ее статуса push или merge.

## 12. Работа с удалённым репозиторием

Удалённый репозиторий (внешний репозиторий) – это обсолютно полноценная версия проекта, размещённая на удалённом сервере, не имеющая никаких отличий от локального.
Доступ к удалённому репозиторию может осуществляться через интернет или же через локальную сеть.

### 12.1. Регистрация аккаунта на GitHub

Для регистриации на GitHub необходимо перейти на оффициальный [сайт](https://github.com), где нажав кнопку `sign up` ввести имя пользователя; адрес электронной почты; пароль.

### 12.2. Создаём и связываем локальный и удалённый репозиторий

На самом сайте насоздаём новый репозиторий, указывая его название, после чего будет предложено в терминале ввести следующие команды:

```
git init
git add Git_instruction.md
git commit -m "first commit"
git branch -M main
git remote add origin https://github.com/......git
git push -u origin main
```

Если репозиторий был создан ранее на локальном пк, то вводим в терминале следующие команды:
```
git remote add origin https://github.com/......git
git branch -M main
git push -u origin main
```

Кроме того  можно клонировать существующий удалённый репозиторий Git, используя команду:
```
git clone "адрес удалённого репозитория"
```

### 12.3. Загрузка данных из удалённого репозитория

Если текущая ветка настроена на отслеживание удалённой ветки, то можно использовать команду `git pull` для того, чтобы в автоматическом режиме получить изменения из удалённой ветки и слить их с текущей.
Выполнение команды `git pull` скачивает данные с сервера и автоматически пытается слить merge их с с текущей активной веткой в локальном репозитории.

В случае, когда необходимо забрать с удалённого репозитория только данные, которые отсутствуют в локальном, есть cмысл использовать команду:
```
git fetch 
```
После выполнения команды `git fetch` появляются ссылки на все ветки из удалённого репозитория, которые можно просмотреть или слить.

Принципиальным является то, что команда `git fetch` забирает данные в локальный репозиторий, но не сливает их с какими-либо наработками и не модифицирует их.
После выплнения команды `git fetch` необходимо вручную слить эти данные с данными текущими данными.

### 12.4. Отправка изменений в удалённый репозиторий

В случае, если необходимо поделиться своими наработками в репозитории, отправить данные в удалённый репозиторий, то для этого используется команда:

```
git push <remote-name> <branch-name> или сокращённо git push
```

### 12.5. Просмотр удаленного репозитория

Для просмотра содержимого удалённого репозитория используется команда:
```
git remote show
```

Для того, чтобы больше информации об одном из удалённых репозиториев, используется команда:
```
git remote show "название ветки"
```

### 12.6 Работа с чужим репозиторием

Находясь в чужом репозитории на GitHub, необходимо нажать кнопку `Fork`.

После чего чужой репозиторий будет разветвлен и скопирован в аккаунт на GitHub.

Клонирование репозитория на компьютер осуществляется с помощью команды:
```
git clone <адрес удалённого репозитория
```

Cделав необходимые правки и коммит c описание внесенных изменений, отправляем изменения в свой репозиторий на GitHub (git push).

После этого на сайте GitHub необходимо перейти на вкладку Pull Request и справа вверху нажать кнопку «New pull request» и далее Create pull request».

*Можно добавить какой-либо комментарий к pull request.*

После чего еще раз нажать кнопку «Create pull request».